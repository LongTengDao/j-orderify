/*!
 * 模块名称：@ltd/j-orderify
 * 模块功能：返回一个能保证给定对象的属性按此后添加顺序排列的 proxy，即使键名是 symbol，或整数 string。
   　　　　　Return a proxy for given object, which can guarantee own keys are in setting order, even if the key name is symbol or int string.
 * 模块版本：1.0.0
 * 许可条款：LGPL-3.0
 * 所属作者：龙腾道 <LongTengDao@LongTengDao.com> (www.LongTengDao.com)
 * 问题反馈：https://GitHub.com/LongTengDao/j-orderify/issues
 * 项目主页：https://GitHub.com/LongTengDao/j-orderify/
 */

const version = '1.0.0';

const { defineProperty, deleteProperty, ownKeys } = Reflect;

const ownKeysKeepers = new WeakMap;

const handlers = Object.create(null, {
	defineProperty: {
		value (target, key, descriptor) {
			if ( defineProperty(target, key, descriptor) ) {
				ownKeysKeepers.get(target).add(key);
				return true;
			}
			return false;
		}
	},
	deleteProperty: {
		value (target, key) {
			if ( deleteProperty(target, key) ) {
				ownKeysKeepers.get(target).delete(key);
				return true;
			}
			return false;
		}
	},
	ownKeys: {
		value (target) {
			return [...ownKeysKeepers.get(target)];
		}
	},
});

const orderify = object => {
	ownKeysKeepers.set(object, new Set(ownKeys(object)));
	return new Proxy(object, handlers);
};

const _export = ( () => {
	const orderify = object => {
		ownKeysKeepers.set(object, new Set(ownKeys(object)));
		return new Proxy(object, handlers);
	};
	orderify.version = version;
	return orderify.orderify = orderify.default = orderify;
} )();

export default _export;
export { orderify, version };

/*¡ @ltd/j-orderify */

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlcnNpb24/dGV4dCIsImV4cG9ydC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAnMS4wLjAnOyIsImltcG9ydCB2ZXJzaW9uIGZyb20gJy4vdmVyc2lvbj90ZXh0JzsvLyBSZWZsZWN0LCBXZWFrTWFwLCBPYmplY3QsIFNldCwgUHJveHlcblxuY29uc3QgeyBkZWZpbmVQcm9wZXJ0eSwgZGVsZXRlUHJvcGVydHksIG93bktleXMgfSA9IFJlZmxlY3Q7XG5cbmNvbnN0IG93bktleXNLZWVwZXJzID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IGhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG5cdGRlZmluZVByb3BlcnR5OiB7XG5cdFx0dmFsdWUgKHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG5cdFx0XHRpZiAoIGRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSApIHtcblx0XHRcdFx0b3duS2V5c0tlZXBlcnMuZ2V0KHRhcmdldCkuYWRkKGtleSk7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSxcblx0ZGVsZXRlUHJvcGVydHk6IHtcblx0XHR2YWx1ZSAodGFyZ2V0LCBrZXkpIHtcblx0XHRcdGlmICggZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpICkge1xuXHRcdFx0XHRvd25LZXlzS2VlcGVycy5nZXQodGFyZ2V0KS5kZWxldGUoa2V5KTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9LFxuXHRvd25LZXlzOiB7XG5cdFx0dmFsdWUgKHRhcmdldCkge1xuXHRcdFx0cmV0dXJuIFsuLi5vd25LZXlzS2VlcGVycy5nZXQodGFyZ2V0KV07XG5cdFx0fVxuXHR9LFxufSk7XG5cbmV4cG9ydCBjb25zdCBvcmRlcmlmeSA9IG9iamVjdCA9PiB7XG5cdG93bktleXNLZWVwZXJzLnNldChvYmplY3QsIG5ldyBTZXQob3duS2V5cyhvYmplY3QpKSk7XG5cdHJldHVybiBuZXcgUHJveHkob2JqZWN0LCBoYW5kbGVycyk7XG59O1xuXG5leHBvcnQgeyB2ZXJzaW9uIH07XG5cbmV4cG9ydCBkZWZhdWx0ICggKCkgPT4ge1xuXHRjb25zdCBvcmRlcmlmeSA9IG9iamVjdCA9PiB7XG5cdFx0b3duS2V5c0tlZXBlcnMuc2V0KG9iamVjdCwgbmV3IFNldChvd25LZXlzKG9iamVjdCkpKTtcblx0XHRyZXR1cm4gbmV3IFByb3h5KG9iamVjdCwgaGFuZGxlcnMpO1xuXHR9O1xuXHRvcmRlcmlmeS52ZXJzaW9uID0gdmVyc2lvbjtcblx0cmV0dXJuIG9yZGVyaWZ5Lm9yZGVyaWZ5ID0gb3JkZXJpZnkuZGVmYXVsdCA9IG9yZGVyaWZ5O1xufSApKCk7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxnQkFBZSxPQUFPOzt3QkFBQyx4QkNFdkIsTUFBTSxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLEdBQUcsT0FBTyxDQUFDOztBQUU1RCxNQUFNLGNBQWMsR0FBRyxJQUFJLE9BQU8sQ0FBQzs7QUFFbkMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7Q0FDcEMsY0FBYyxFQUFFO0VBQ2YsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUU7R0FDL0IsS0FBSyxjQUFjLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxVQUFVLENBQUMsR0FBRztJQUM5QyxjQUFjLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQyxPQUFPLElBQUksQ0FBQztJQUNaO0dBQ0QsT0FBTyxLQUFLLENBQUM7R0FDYjtFQUNEO0NBQ0QsY0FBYyxFQUFFO0VBQ2YsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtHQUNuQixLQUFLLGNBQWMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUc7SUFDbEMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDdkMsT0FBTyxJQUFJLENBQUM7SUFDWjtHQUNELE9BQU8sS0FBSyxDQUFDO0dBQ2I7RUFDRDtDQUNELE9BQU8sRUFBRTtFQUNSLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRTtHQUNkLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztHQUN2QztFQUNEO0NBQ0QsQ0FBQyxDQUFDOztBQUVILEFBQVksTUFBQyxRQUFRLEdBQUcsTUFBTSxJQUFJO0NBQ2pDLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDckQsT0FBTyxJQUFJLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7Q0FDbkMsQ0FBQztBQUNGLEFBRUE7QUFDQSxnQkFBZSxFQUFFLE1BQU07Q0FDdEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJO0VBQzFCLGNBQWMsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckQsT0FBTyxJQUFJLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7RUFDbkMsQ0FBQztDQUNGLFFBQVEsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO0NBQzNCLE9BQU8sUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQztDQUN2RCxJQUFJLENBQUM7Ozs7Ozs7OzsifQ==